<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="keywords" content="CI/CD Jenkins Pipelines NodeJs Docker KeystoneJs">
<title>Actividad 8. Integración Continua con Jenkins</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-right">
<div id="header">
<h1>Actividad 8. Integración Continua con Jenkins</h1>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de contenidos</div>
<ul class="sectlevel1">
<li><a href="#_introducción_a_la_integración_continua_con_jenkins">1. Introducción a la Integración Continua con Jenkins</a>
<ul class="sectlevel2">
<li><a href="#_principales_características">1.1. Principales características</a></li>
<li><a href="#_por_qué_usarlo">1.2. ¿Por qué usarlo?</a></li>
<li><a href="#_cicd_y_devops">1.3. CI/CD y DevOps</a></li>
</ul>
</li>
<li><a href="#_prerrequisitos">2. Prerrequisitos</a></li>
<li><a href="#_instalación_de_plugins_adicionales">3. Instalación de plugins adicionales</a></li>
<li><a href="#_tipos_de_proyectos_en_jenkins">4. Tipos de proyectos en Jenkins</a></li>
<li><a href="#_creación_de_un_proyecto_con_ant">5. Creación de un Proyecto con Ant</a></li>
<li><a href="#_creación_de_un_proyecto_maven">6. Creación de un Proyecto Maven</a>
<ul class="sectlevel2">
<li><a href="#_construcción_básica">6.1. Construcción básica</a></li>
<li><a href="#_informe_de_cobertura">6.2. Informe de cobertura</a></li>
<li><a href="#_añadiendo_javadoc_y_site">6.3. Añadiendo Javadoc y Site</a></li>
</ul>
</li>
<li><a href="#_creación_de_un_proyecto_pipeline">7. Creación de un Proyecto Pipeline</a>
<ul class="sectlevel2">
<li><a href="#_diseño_del_pipeline">7.1. Diseño del <em>pipeline</em></a></li>
<li><a href="#_informe_de_cobertura_de_código">7.2. Informe de Cobertura de código</a></li>
<li><a href="#_análisis_estático_de_código">7.3. Análisis estático de código</a></li>
<li><a href="#_dependency_check">7.4. Dependency-check</a></li>
<li><a href="#_documentación_javadoc_y_site">7.5. Documentación Javadoc y Site</a></li>
<li><a href="#_jenkinsfile">7.6. Jenkinsfile</a></li>
</ul>
</li>
<li><a href="#_faq_y_resolución_de_problemas_thoubleshouting">8. FAQ y resolución de problemas (<em>thoubleshouting</em>)</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Herramientas y Métodos en Ingeniería del Software.
Version 1.1, Abril-2021.
Joaquín Cañadas &lt;<a href="mailto:jjcanada@ual.es">jjcanada@ual.es</a>&gt;</p>
</div>
<div class="quoteblock abstract">
<blockquote>
Integración Continua con Jenkins.
</blockquote>
</div>
<div class="ulist">
<div class="title">Objetivos</div>
<ul>
<li>
<p>Construcción automatizada de proyectos Java basados en Maven usando Jenkins como servidor de Integración Continua</p>
</li>
<li>
<p>Diseño de los pasos de construcción con Jenkins Pipelines</p>
</li>
<li>
<p>Configurar <em>Webhooks</em> para la integración de GitHub y Jenkins</p>
</li>
<li>
<p>Generación y visualización de los informes de evolución del proyecto</p>
</li>
</ul>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Realización y entrega</div>
<div class="paragraph">
<p>La realización de estas actividades se realizará de forma individual. Serán la base para actividades posteriores que ser harán en equipo. Cada miembro del equipo debe tener sus ejercicios individuales en el Jenkins del equipo.
La entrega será mediante el envío de un informe y el acceso al profesor a los servicios configurados, para la revisión y evaluación de los mismos.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introducción_a_la_integración_continua_con_jenkins">1. Introducción a la Integración Continua con Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://www.jenkins.io/">Jenkins CI</a> es un sistema de Integración Continua open source, desarrollado por <a href="https://en.wikipedia.org/wiki/Kohsuke_Kawaguchi">Kohsuke Kawaguchi</a>, desarrollador de la ex Sun Microsystems y posteriormente de Oracle. En 2010 fundó CloudBees, empresa que da soporte empresarial de Jenkins.</p>
</div>
<div class="paragraph">
<p>Jenkins proporciona integración continua en el desarrollo de software, es decir, permite configurar y agendar la ejecución de las tareas que componen toda y/o cada una de las partes que conforman el ciclo de vida de un proyecto. Para dar una idea de esto, basta pensar en los famosos <a href="https://en.wikipedia.org/wiki/Daily_build"><em>night-builds</em></a>, los cuales son compilaciones, validaciones y liberaciones de versiones beta que realizan algunos sistemas durante las noches de forma automática sobre lo que han ido trabajando los desarrolladores durante el día.</p>
</div>
<div class="paragraph">
<p>Jenkins nace como <em>fork</em> del sistema predecesor <a href="https://es.wikipedia.org/wiki/Hudson_(software)">Hudson CI</a>, del mismo autor, como alternativa open source desde que Sun  fue adquirida por Oracle y cambiada su licencia.</p>
</div>
<div class="paragraph">
<p>Jenkins posee una interminable lista de plugins, los cuales le permiten definir tareas que pueden integrarse con herramientas de control de versiones (Subversion, Git, &#8230;&#8203;), ejecutar proyectos basados en Apache Maven, Apache Ant, Microsoft MSBuild, shell y batch scripts, y muchas otras. Además permite ejecutar tareas adicionales previa y posteriormente a la construcción, como por ejemplo preparar el entorno, realizar un despliegue o compactar y subir binarios a un servidor por SSH.</p>
</div>
<div class="paragraph">
<p>Para cada proyecto, Jenkins guarda un historial de cambios realizados por build o versión, almacena quién lo realizo y cuales archivos fueron manipulados, y sus comentarios al respecto.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Existen otras muchas herramientas de integración continua y despliegue continuo (CI/CD), como <a href="https://travis-ci.org/">Travis CI</a>, <a href="https://about.gitlab.com/gitlab-ci/">Gitlab CI</a>, <a href="https://circleci.com/">Circle CI</a>, <a href="https://semaphoreci.com/">Semaphore CI</a>, <a href="https://appveyor.com/">Appveyor</a>, <a href="https://azure.microsoft.com/en-gb/services/devops/pipelines/?nav=min">Azure DevOps</a>, y muchas más.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_principales_características">1.1. Principales características</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Automatiza la construcción del software, periódicamente o en base a unas condiciones. En proyectos Maven se puede simular una construcción similar a un equipo que sólo tuviese instalado Java y Maven (y el correspondiente sistema operativo); de este modo, se <em>elimina el perverso efecto de la contaminación de los equipos de desarrollo</em>.</p>
</li>
<li>
<p>Centraliza la información referida a la construcción del software y al estado y <em>salud</em> del proyecto:</p>
<div class="ulist">
<ul>
<li>
<p>Estado de la construcción.</p>
</li>
<li>
<p>Informes sobre la construcción.</p>
</li>
<li>
<p>Informes sobre las pruebas.</p>
</li>
<li>
<p><em>Site</em> del proyecto.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Gestiona la interacción con otras herramientas, como por ejemplo [<em>SonarQube</em>](<a href="https://sonarcloud.io/" class="bare">https://sonarcloud.io/</a>), de mide de calidad del software.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_por_qué_usarlo">1.2. ¿Por qué usarlo?</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Simplifica significativamente (a un par de clicks y dentro de un entorno web lo que lo hace fácilmente accesible desde cualquier parte) los procesos involucrados en el ciclo de vida de un proyecto, ya sean  simples o repetitivos, largos y complejos como puede ser de generación de binarios, integrando el trabajo de varios desarrolladores, ejecución de pruebas automatizadas, generación de informes, publicación en pagina web, notificación a clientes de versiones beta, etc.</p>
</li>
<li>
<p>Da un marco de simplicidad sobre la integración continua gracias a las diferentes posibilidades de notificaciones de éxitos y errores entre procesos, por lo que con la formación adecuada sobre los mismos se puede asegurar una altísima calidad de software desde el primer día, evitando errores, demoras y a un mínimo coste.</p>
</li>
<li>
<p>Debido a los múltiples sistemas de notificaciones por cual optar (ya sea por mail, chat, slack, twitter, etc), es sencillo estar siempre informado y poder tomar decisiones rápidamente.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Aquí pueden encontrar un resumen de <a href="https://www.browserstack.com/guide/continuous-integration-with-jenkins-tutorial">beneficios y preocupaciones</a> de Jenkins.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cicd_y_devops">1.3. CI/CD y DevOps</h3>
<div class="paragraph">
<p>La integración continua forma parte de un proceso más amplio conocido como <strong>entrega continua</strong> o <strong>despliegue continuo</strong> (Continuous Delivery, Continuous Deployment), que además abarca el despliegue automatizado de proyectos en distintos entornos de ejecución. Por ello, frecuentemente en la bibliografía se hace referencia como <a href="https://es.wikipedia.org/wiki/CI/CD"><strong>CI/CD</strong></a>, de sus siglas en inglés: <em>Continuous Integration</em> <em>and</em> <em>Continuous Delivery</em>.</p>
</div>
<div class="paragraph">
<p>CI/CD es una práctica fundamental dentro de la metodología <a href="https://es.wikipedia.org/wiki/DevOps">DevOps</a> en ingeniería del software.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_prerrequisitos">2. Prerrequisitos</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para comenzar a trabajar en esta sesión, será necesario haber realizado las actividades anteriores de JUnit y Maven. Además, se debe disponer de crédito en Azure, y es necesario disponer de una máquina virtual con Jenkins instalado y un usuario con permisos (todo ello realizado en sesiones anteriores). Igualmente, se dispone de usuario en GitHub y los repositorios git en GitHub de los proyectos Java de las sesiones anteriores. También, debes tener una pareja de claves SSH personal en la carpeta <code>HOME</code> del usuario de tu equipo (<code>~</code>).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code>~/.ssh/
├── id_rsa <i class="conum" data-value="1"></i><b>(1)</b>
└── id_rsa.pub <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>clave privada</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>clave pública</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación_de_plugins_adicionales">3. Instalación de plugins adicionales</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Vamos a instalar varios plugins adicionales en Jenkins, si aun no están instalados:  Github integration, Maven Integration, Cobertura, Jacoco (comprobar antes si no están instalados ya), Greenballs, Code Coverage Api, JavaDoc, Warnings Next Generation, Embeddable Build Status Plugin, xUnit, etc.</p>
</div>
<div class="paragraph">
<p>Haz clic en <em>Manage Jenkins</em> &gt; <em>Manage Plugins</em>. En la pestaña <em>Available</em> busca <em>Github integration</em>, seleccionaló y pulsa en <em>Download now and install after restart</em>.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/jenkins-plugins-github-integration.png" alt="jenkins plugins github integration">
</div>
<div class="title">Fig. 1. Instalación del plugin Github integration</div>
</div>
<div class="paragraph">
<p>Repite los pasos para los plugins <em>Maven Integration</em>, <em>Cobertura</em> <em>Green Balls</em>, <em>JavaDoc</em> y <em>xUnit</em>.</p>
</div>
<div class="paragraph">
<p>Necesitaremos visualizar el resultado de la cobertura en Jenkins. Para ello instala el plugin de JaCoCo (Java Code Coverage) y el plugin Code Coverage API.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/plugins-jacoco-install.png" alt="plugins jacoco install">
</div>
<div class="title">Fig. 2. Instalación del plugin Jacoco</div>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/plugins-code-coverage-api-install.png" alt="plugins code coverage api install">
</div>
<div class="title">Fig. 3. Instalación del plugin Code Coverage API</div>
</div>
<div class="paragraph">
<p>Para visualizar el resultado del análisis estático de código, necesitaremos el plugin <a href="https://github.com/jenkinsci/warnings-ng-plugin/blob/master/doc/Documentation.md#declarative-pipeline-configuration">Warnings Next Generation</a>. Procede de la misma forma.</p>
</div>
<div class="paragraph">
<p>Instala además el <a href="https://plugins.jenkins.io/embeddable-build-status/">Embeddable Build Status Plugin</a>, que nos permitirá visualizar en el archivo README.md del proyecto, o en cualquier otro sitio, un pequeño <em>badge</em> o insignia con el estado de build del proyecto.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/badge-build-status.png" alt="badge build status">
</div>
<div class="title">Fig. 4. <em>Badge</em> con el estado del build</div>
</div>
<div class="paragraph">
<p>Por último, marca <em>Restart Jenkins</em> para completar la instalación. Tras unos segundos, vuelve a iniciar sesión y tendrás los plugins instalados.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/jenkins-plugins-restart.png" alt="jenkins plugins restart">
</div>
<div class="title">Fig. 5. Reiniciar para completar la instalación</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>El plugin Embeddable Build Status necesita dar acceso al usuario anónimo en la configuración de seguridad de Jenkins, para que se pueda leer el estado de construcción del proyecto:</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/build-status-access.png" alt="build status access">
</div>
<div class="title">Fig. 6. Acceso al usuario anómimo</div>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Además de los plugins, para que la máquina virtual de Jenkins funcione correctamente al aumentar la carga de trabajo, es necesario <strong>añadir memoria Swap</strong> (en disco), al menos <strong>2 Gb</strong>. Aquí tienes los pasos: <a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-space-on-ubuntu-18-04">How To Add Swap Space on Ubuntu 18.04</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tipos_de_proyectos_en_jenkins">4. Tipos de proyectos en Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En Jenkins existen varios tipos de proyectos. Al hacer clic en nuevo elemento, aparece la vista de creación de nuevo proyecto, en la que debemos introducir el nombre del proyecto y su tipo. Los 3 principales tipos son:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Estilo libre (Freestyle project)</strong>: es el más flexible en su configuración. Permite construir proyectos en cualquier tecnología, en función de las herramientas (tools) y plugins que tengas instalados. Se utiliza cuando deseemos ejecutar fundamentalmente comandos desde la <em>shell</em>. En la sesión de despliegue automatizado de la web del equipo (sesión 05) usamos proyectos de este tipo.</p>
</li>
<li>
<p><strong>Proyecto Maven</strong>: se utiliza para construir proyectos Java basados en Maven. De forma predeterminada incluye un paso en el que añadir los <em>goals</em> de maven que se deseen ejecutar en la construcción del proyecto.</p>
</li>
<li>
<p><strong>Pipeline</strong>: un <em>pipeline</em> o tubería identifica los pasos o fases (<em>stages</em>) que se van a ejecutar en el proceso de construcción del proyecto. Cada fase tiene definido cómo se ejecuta, y los resultados que produce. La ejecución de las fases es secuencial, aunque también se pueden configurar fases <a href="https://www.jenkins.io/blog/2017/09/25/declarative-1/">en paralelo</a>.</p>
</li>
</ul>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/001-project-types.png" alt="001 project types">
</div>
<div class="title">Fig. 7. Nuevo proyecto. Tipos principales de proyectos</div>
</div>
<div class="paragraph">
<p>En esta actividad vamos a construir en Jenkins un proyecto estilo libre en Ant, y los proyectos Java <em>mavenizados</em> de las sesiones anteriores de dos formas:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Utilizando la forma clásica, creando un proyecto tipo Maven.</p>
</li>
<li>
<p>Utilizando la descripción en pases mediante <em>pipeline</em>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Comencemos por la primera forma.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_de_un_proyecto_con_ant">5. Creación de un Proyecto con Ant</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Comenzaremos con un ejemplo sencillo en Java denominado ConnectFour. Este proyecto se construye con Ant, y está disponible aquí:
<a href="https://github.com/ualhmis/connect-four.git" class="bare">https://github.com/ualhmis/connect-four.git</a></p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Este ejercicio ConnectFour debe ser realizado individualmente por cada uno de los miembros del equipo.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Si deseas hacer cambios, por ejemplo para corregir los tests que fallan, primero <em>forkea</em> el repositorio a tu cuenta de GitHub</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creamos una nueva tarea de tipo estilo libre: el nombre debe ser <strong>connectFour-nombreMiembro</strong></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four.png" alt="new connect four">
</div>
<div class="title">Fig. 8. Nuevo proyecto estilo libre: Connect-four</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Jenkins conecta al repositorio donde están los fuentes para descargarlos. Selecciona Git, y añade esta URL: <a href="https://github.com/ualhmis/connect-four.git" class="bare">https://github.com/ualhmis/connect-four.git</a>. Al tratarse de un repositorio público no necesita credenciales.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-git-url.png" alt="new connect four git url">
</div>
<div class="title">Fig. 9. Git repositorio URL</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Archivo de construcción (build): en la ejecución de la tarea, elegimos Ant</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-build-ant.png" alt="new connect four build ant">
</div>
<div class="title">Fig. 10. Build. Ant</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Seleccionamos la versión de Ant instalada (no dejar “por defecto” porque da error), y en Destinos escribimos <strong>all</strong></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-build-all.png" alt="new connect four build all">
</div>
<div class="title">Fig. 11. Seleccionar Ant version. Targets <em>all</em></div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Acciones a ejecutar después: Publicamos los resultados de los test JUnit y la documentación JavaDoc</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-postbuild-junit.png" alt="new connect four postbuild junit">
</div>
<div class="title">Fig. 12. Acciones a ejecutar despues: JUnit</div>
</div>
<div class="paragraph">
<p>Y añadimos la ruta del archivo con los resultados de los test JUnit en xml: <code>target/test-results/*.xml</code></p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-postbuild-junit-xml.png" alt="new connect four postbuild junit xml">
</div>
<div class="title">Fig. 13. Test report XML</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>Igualmente, añadimos otra acción a ejecutar después para JavaDoc</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-postbuild-javadoc.png" alt="new connect four postbuild javadoc">
</div>
<div class="title">Fig. 14. Javadoc</div>
</div>
<div class="paragraph">
<p>Y añadimos la ruta donde se han generado los archivos JavaDoc: <code>target/docs</code></p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-postbuild-javadoc-target.png" alt="new connect four postbuild javadoc target">
</div>
<div class="title">Fig. 15. Ruta a Javadoc</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Guardamos</p>
</li>
<li>
<p><strong>Construir ahora</strong>.
Por consola se visualiza el resultado de la ejecución de las tareas Ant configuradas en el archivo <code>build.xml</code> del proyecto.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>El resultado es bola amarilla, porque fallan un par de tests.
Para ver una gráfica de resultados de los Test debemos ejecutar al menos 2 construcciones.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-connect-four-build-results.png" alt="new connect four build results">
</div>
<div class="title">Fig. 16. Connect-four: Resultado de la construcción</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_de_un_proyecto_maven">6. Creación de un Proyecto Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para ese ejercicio, cada uno debe usar el repositorio de la práctica 7 donde se ha trabajado con Maven.</p>
</div>
<div class="sect2">
<h3 id="_construcción_básica">6.1. Construcción básica</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crea un nuevo proyecto Maven. El nombre debe ser <strong>ej07-maven-nombreMiembro</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-maven.png" alt="new maven">
</div>
<div class="title">Fig. 17. Nuevo proyecto Maven: sesion07</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Indica la URL del proyecto en Github. Utiliza aquí la URL de tu proyecto de la <strong>práctica 7</strong>.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-maven-github-url.png" alt="new maven github url">
</div>
<div class="title">Fig. 18. URL del proyecto en Github</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Selecciona Git como control de código fuente. Indica la URL del repositorio.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-maven-github-repo.png" alt="new maven github repo">
</div>
<div class="title">Fig. 19. URL del repositorio en Github</div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En caso de que sea un repositorio privado tendrás que proporcionar unas <strong>credenciales</strong>. Aunque <strong>no es recomendable</strong>, puedes introducir tus credenciales usuario/contraseña de Github. Sin embargo, es mejor <strong>usar pareja de claves SSH</strong>, aunque es igual de <em>mala práctica</em> meter tu clave privada personal en Jenkins. Por ello, la <em>buena práctica</em> consiste en <strong>crear una nueva pareja de claves</strong> SSH exclusiva para que Jenkins pueda leer el repositorio privado, añadir la <strong>clave pública</strong> al repositorio en GitHub (exclusivamente al repositorio concreto, no a nuestro usuario de GitHub), y por último añadir la <strong>clave privada</strong> como credencial en Jenkins para que pueda leer ese repositorio privado de GitHub.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>En la sección de disparadores de la construcción (build trigers) marca la opción de hook con Github:</p>
</li>
</ol>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title"><strong>Webhook</strong>: ejecución automática del build en Jenkins tras un <em>push</em> en GitHub</div>
<div class="paragraph">
<p>Configura en GitHub un nuevo <em>Webhook</em> para que tras cada cambio de código en el repositorio, Jenkins sea notificado y lance la construcción del pipeline:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>En GitHub, seleccionamos el repositorio sobre el que queremos activar la construcción en Jenkins y hacemos clic en: <em>Settings &gt; WebHooks &gt; Add webhook</em></p>
</li>
<li>
<p>En Payload URL:</p>
<div class="literalblock">
<div class="content">
<pre>http://{YOUR_JENKINS_URL}/github-webhook/</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/jenkins-webhook-github.png" alt="jenkins webhook github">
</div>
<div class="title">Fig. 20. Nuevo Webhook</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Finalmente, en la configuración del proyecto en Jenkins, en la sección Build Trigers, marca la opción <em>GitHub hook tirigger from GITScm polling</em></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/jenkins-webhook-build-triger.png" alt="jenkins webhook build triger">
</div>
<div class="title">Fig. 21. Activar el Webhook en build trigers</div>
</div>
<div class="paragraph">
<p>A partir de ahora, cuando el repositorio en GitHub reciba un push notificará a Jenkins para que lance la construcción automáticamente.</p>
</div>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="5">
<li>
<p>En la sección de <em>build</em>, añade la ruta correcta al archivo <code>pom.xml</code> y por último añade los goals: <code>clean package</code></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-maven-build-goals.png" alt="new maven build goals">
</div>
<div class="title">Fig. 22. Build con Maven</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="6">
<li>
<p>Guarda los cambios</p>
</li>
<li>
<p><strong>Construir ahora</strong>.
Por consola se visualiza el resultado de la ejecución de maven.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>En los proyectos Maven, no hace falta configurar la publicación de los test de JUnit, se hace de forma predeterminada a partir de la segunda construcción.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-maven-build-results.png" alt="new maven build results">
</div>
<div class="title">Fig. 23. Resultados de la construcción</div>
</div>
</div>
<div class="sect2">
<h3 id="_informe_de_cobertura">6.2. Informe de cobertura</h3>
<div class="olist arabic">
<ol class="arabic" start="8">
<li>
<p>Añade los <strong>resultados de la cobertura</strong> obtenidos con <strong>JaCoCO</strong>: entra de nuevo en la configuración del proyecto, en <em>post-build actions</em> añade una acción a ejecutar después y selecciona <em>Record JaCoCo coverage report</em></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-postbuild-jacoco.png" alt="maven postbuild jacoco">
</div>
<div class="title">Fig. 24. Añadir el informe de cobertura con JaCoCO</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="9">
<li>
<p>Configura la ruta correcta a los fuentes: <code>**/src/</code></p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-postbuild-jacoco-config.png" alt="maven postbuild jacoco config">
</div>
<div class="title">Fig. 25. Configuración de JaCoCo</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Guarda los cambios y construye el proyecto. Al actualizar el proyecto verás la gráfica de Cobertura. Si ejecutas un par de builds la gráfica muestra la linea de evolución.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-postbuild-jacoco-grafica.png" alt="maven postbuild jacoco grafica">
</div>
<div class="title">Fig. 26. Añadir el informe de cobertura con JaCoCo</div>
</div>
<div class="paragraph">
<p>Y si haces clic en la gráfica, verás el informe detallado.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-postbuild-jacoco-details.png" alt="maven postbuild jacoco details">
</div>
<div class="title">Fig. 27. Detalle de cobertura con JaCoCo</div>
</div>
</div>
<div class="sect2">
<h3 id="_añadiendo_javadoc_y_site">6.3. Añadiendo Javadoc y Site</h3>
<div class="olist arabic">
<ol class="arabic" start="10">
<li>
<p>Para generar la documentación en <em>Javadoc</em> y publicarla en la página del proyecto, simplemente añade los <em>goals</em> <code>javadoc:javadoc javadoc:aggregate</code>.</p>
</li>
<li>
<p>Para generar la documentación <em>Site</em> de Maven y publicarla, simplemente añade el <em>goal</em> <code>site</code>.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-postbuild-javadoc-site.png" alt="maven postbuild javadoc site">
</div>
<div class="title">Fig. 28. Javadoc y Site</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="12">
<li>
<p>Para poder visualizar correctamente el <em>Site</em>, hay que cambiar la <a href="https://wiki.jenkins.io/display/JENKINS/Configuring+Content+Security+Policy#ConfiguringContentSecurityPolicy-TheDefaultRuleSet">configuración de seguridad</a> de Jenkins predeterminada que es muy restrictiva para prevenir de archivos HTML/JS maliciosos. Para modificar la configuración, abre la consola de scritps (<em>Manage Jenkins / Script Console</em>), y ejecuta estas líneas:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">System</span><span class="o">.</span><span class="na">setProperty</span><span class="o">(</span><span class="s2">"hudson.model.DirectoryBrowserSupport.CSP"</span><span class="o">,</span> <span class="s2">"sandbox; default-src 'none'; img-src 'self'; style-src 'self' 'unsafe-inline'; "</span><span class="o">)</span>
<span class="n">System</span><span class="o">.</span><span class="na">getProperty</span><span class="o">(</span><span class="s2">"hudson.model.DirectoryBrowserSupport.CSP"</span><span class="o">)</span></code></pre>
</div>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/maven-script-console-site.png" alt="maven script console site">
</div>
<div class="title">Fig. 29. Script Console: permisos para visualizar <em>Site</em></div>
</div>
<div class="olist arabic">
<ol class="arabic" start="13">
<li>
<p>Tras ello ya podrás visualizar correctamente. Pero ten en cuenta que cada vez que reinicies Jenkins esta configuración  se pierde y vuelve a la configuración predeterminada.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creación_de_un_proyecto_pipeline">7. Creación de un Proyecto Pipeline</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Para ese ejercicio, cada estudiante debe usar, de nuevo, el repositorio de la práctica 7 donde se ha trabajado con Maven. Vamos a configurar el proyecto Jenkins que construya el mismo repositorio de la sección anterior, pero esta vez vamos a utilizar <em>pipelines</em>.</p>
</div>
<div class="sect2">
<h3 id="_diseño_del_pipeline">7.1. Diseño del <em>pipeline</em></h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Crea un nuevo proyecto y dale el nombre y selecciona tipo <em>pipeline</em>. El nombre debe ser <strong>ej07-pipeline-nombreMiembro</strong>.</p>
</li>
<li>
<p>Indica la URL del proyecto en Github. Utiliza aquí la URL de tu proyecto de la <strong>práctica 7</strong>.</p>
</li>
<li>
<p>En la sección Pipeline, disponemos de un cuadro de texto en el que añadir la descripción de nuestro pipeline utilizando la sintaxis <em>declarativa</em> que Jenkins proporciona. Vamos a ver cómo hacerlo.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
  <span class="n">agent</span> <span class="n">any</span> <i class="conum" data-value="1"></i><b>(1)</b>

  <span class="n">tools</span> <span class="o">{</span>
    <span class="c1">// Nombre dado a la instalación de Maven en "Global Tool configuration"</span>
    <span class="n">maven</span> <span class="s2">"Default Maven"</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="o">}</span>

  <span class="n">stages</span> <span class="o">{</span> <i class="conum" data-value="3"></i><b>(3)</b>
   <span class="o">...</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>agente o nodo de Jenkins en que ejecuta la construcción del  proyecto. En el ejemplo, <code>any</code> indica que se ejecutará cualquier nodo, en nuestro caso será en <em>master</em> ya que es el único nodo que hay definido en nuestro Jenkins.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>como herramienta para la construcción se usará maven. Pon aquí el nombre que diste a tu instalación de Maven configurada previamente en Tools Configuration.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Bloque de <code>stages</code>: fases o etapas que conforman el pipeline</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A continuación se muestra cómo definir cada fase o <em>stage</em> una a una  dentro del bloque <em>stages</em>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">pipeline</span> <span class="o">{</span>
  <span class="n">agent</span> <span class="n">any</span>

  <span class="n">tools</span> <span class="o">{</span>
    <span class="c1">// Nombre dado a la instalación de Maven en "Tools configuration"</span>
    <span class="n">maven</span> <span class="s2">"Default Maven"</span>
  <span class="o">}</span>

  <span class="n">stages</span> <span class="o">{</span>
    <span class="n">stage</span><span class="o">(</span><span class="s1">'Git fetch'</span><span class="o">)</span> <span class="o">{</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="n">steps</span> <span class="o">{</span>
        <span class="c1">// Get some code from a GitHub repository</span>
        <span class="n">git</span> <span class="s1">'https://github.com/ualhmis/MavenEjercicios.git'</span>
      <span class="o">}</span>
    <span class="o">}</span>
    <span class="n">stage</span><span class="o">(</span><span class="s1">'Compile, Test, Package'</span><span class="o">)</span> <span class="o">{</span> <i class="conum" data-value="2"></i><b>(2)</b>
      <span class="n">steps</span> <span class="o">{</span>
        <span class="c1">// When necessary, use '-f path-to/pom.xml' to give the path to pom.xml</span>
        <span class="c1">// Run goal 'package'. It includes compile, test and package.</span>
        <span class="n">sh</span> <span class="s2">"mvn  -f sesion07Maven/pom.xml clean package"</span> <i class="conum" data-value="3"></i><b>(3)</b>
      <span class="o">}</span>
      <span class="n">post</span> <span class="o">{</span> <i class="conum" data-value="4"></i><b>(4)</b>
        <span class="c1">// Record the test results and archive the jar file.</span>
        <span class="n">success</span> <span class="o">{</span>
          <span class="n">junit</span> <span class="s1">'**/target/surefire-reports/TEST-*.xml'</span>
          <span class="n">archiveArtifacts</span> <span class="s1">'**/target/*.jar'</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Fase de descarga del <strong>repositorio git</strong></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Fase de build: <strong>compilación, test y empaquetado</strong> de la aplicación. Se ejecutarán los <em>goals</em> <code>clean package</code>: primero se elimina todo lo generado en la construcción anterior, y a continuación se lanza la construcción con <code>package</code> tal y como está definida en el archivo <code>pom.xml</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Cuando sea necesario, indique el path al archivo <code>pom.xml</code> con el parámetro <code>-f path-to/pom.xml</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Paso <strong>posterior al build</strong>, que guarda los resultados de los test de JUnit para generar la gráfica de evolución de los test. Además, <a href="https://www.jenkins.io/doc/pipeline/steps/core/#archiveartifacts-archive-the-artifacts">archiva el empaquetado</a> <code>.jar</code> para que pueda ser descargado posteriormente</td>
</tr>
</table>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-definition.png" alt="new pipeline definition">
</div>
<div class="title">Fig. 30. Definición del <em>pipeline</em></div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Guarda los cambios y construye.</p>
</li>
<li>
<p>Tras ejecutar el pipeline, con "Build now", el resultado debe ser el siguiente:</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-results.png" alt="new pipeline results">
</div>
<div class="title">Fig. 31. Resultados del <em>pipeline</em></div>
</div>
</div>
<div class="sect2">
<h3 id="_informe_de_cobertura_de_código">7.2. Informe de Cobertura de código</h3>
<div class="paragraph">
<p>Para visualizar informe de cobertura en el pipeline, añade las dos siguientes linea al bloque <code>post</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy">  <span class="o">...</span>
  <span class="n">success</span> <span class="o">{</span>
    <span class="n">junit</span> <span class="s1">'**/target/surefire-reports/TEST-*.xml'</span>
    <span class="n">archiveArtifacts</span> <span class="s1">'**/target/*.jar'</span>
    <span class="n">jacoco</span><span class="o">(</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="nl">execPattern:</span> <span class="s1">'**/target/jacoco.exec'</span><span class="o">,</span>
      <span class="nl">classPattern:</span> <span class="s1">'**/target/classes'</span><span class="o">,</span>
      <span class="nl">sourcePattern:</span> <span class="s1">'**/src/'</span><span class="o">,</span>
      <span class="nl">exclusionPattern:</span> <span class="s1">'**/test/'</span>
    <span class="o">)</span>
    <span class="n">publishCoverage</span> <span class="nl">adapters:</span> <span class="o">[</span><span class="n">jacocoAdapter</span><span class="o">(</span><span class="s1">'**/target/site/jacoco/jacoco.xml'</span><span class="o">)]</span> <i class="conum" data-value="2"></i><b>(2)</b>
  <span class="o">}</span>
  <span class="o">...</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Añade el informe Coverage Trend</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Añade el informe Coverage Report</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tras la construcción de nuevo del proyecto, verás la gráfica de los resultados de los test y debajo la gráfica de evolución de cobertura.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-coverage-results.png" alt="new pipeline coverage results">
</div>
<div class="title">Fig. 32. Resultados de la cobertura</div>
</div>
</div>
<div class="sect2">
<h3 id="_análisis_estático_de_código">7.3. Análisis estático de código</h3>
<div class="paragraph">
<p>Para mantener y aumentar la calidad de nuestro código debemos ayudarnos, entre otras herramientas, de técnicas de <a href="https://es.wikipedia.org/wiki/An%C3%A1lisis_est%C3%A1tico_de_software"><strong>análisis estático de código</strong></a>. Básicamente, se encargan de buscar defectos en el código sin necesidad de que este se ejecute. En Java una de las más habituales es Checkstyle, aunque hay otras como FindBugs, PMD, y SonarQube que integra a los anteriores.</p>
</div>
<div class="paragraph">
<p>Para ejecutar y visualizar el análisis de Checkstyle, añade un nuevo <em>stage</em> al pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy">  <span class="n">stage</span> <span class="o">(</span><span class="s1">'Analysis'</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">steps</span> <span class="o">{</span>
	  <span class="c1">// Warnings next generation plugin required</span>
	  <span class="n">sh</span> <span class="s2">"mvn -f sesion07Maven/pom.xml checkstyle:checkstyle site -DgenerateReports=false"</span>
    <span class="o">}</span>
    <span class="n">post</span> <span class="o">{</span>
      <span class="n">success</span> <span class="o">{</span>
        <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">checkStyle</span><span class="o">()</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Tras la construcción, el pipeline tiene una nueva fase y además en el menú tenemos acceso al informe de CheckStyle.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-checkstyle-report-dashboard.png" alt="new pipeline checkstyle report dashboard">
</div>
<div class="title">Fig. 33. Pipeline con la nueva fase de Análisis</div>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-checkstyle-report-details.png" alt="new pipeline checkstyle report details">
</div>
<div class="title">Fig. 34. Detalles del informe de CheckStyle</div>
</div>
<div class="paragraph">
<p>Como parte del ejercicio, completa por ti mismo la publicación del resto de informes de análisis estático de código generados en la sesión 7. Se publican a través del plugin <a href="https://www.jenkins.io/doc/pipeline/steps/warnings-ng/">Warnings Next Generation</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PMD: añade el <em>goal</em> adecuado en la ejecución de maven y añade la publicación del informe:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">pmdParser</span><span class="o">()</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>CPD: añade la publicación del informe:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">cpd</span><span class="o">()</span></code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>FingBugs: repite el proceso.</p>
</li>
<li>
<p>SpotBugs: repite el proceso.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>El resultado final debe ser tal que así. Para que se ejecuten todos los análisis simplemente llamamos a <code>site</code> ya que todos los tenemos definidos en el bloque <code>&lt;reporting&gt;</code> del <code>pom.xml</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy">    <span class="n">stage</span> <span class="o">(</span><span class="s1">'Analysis'</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">steps</span> <span class="o">{</span>
	    <span class="c1">// Warnings next generation plugin required</span>
	    <span class="n">sh</span> <span class="s2">"mvn -f sesion07Maven/pom.xml site"</span>
      <span class="o">}</span>
      <span class="n">post</span> <span class="o">{</span>
        <span class="n">success</span> <span class="o">{</span>
          <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">checkStyle</span><span class="o">()</span>
          <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">pmdParser</span><span class="o">()</span>
          <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">cpd</span><span class="o">()</span>
          <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">findBugs</span><span class="o">()</span>
          <span class="n">recordIssues</span> <span class="nl">enabledForFailure:</span> <span class="kc">true</span><span class="o">,</span> <span class="nl">tool:</span> <span class="n">spotBugs</span><span class="o">()</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Como resultado debes ver las gráficas de cada una de estas 5 herramientas en la página del proyecto. Y haciendo clic en cada gráfica, así como en los enlaces del menú de la izquierda, se accede al detalle de cada informe.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-analysis-links.png" alt="new pipeline analysis links">
</div>
<div class="title">Fig. 35. Enlaces a los informes de análisis estático de código</div>
</div>
</div>
<div class="sect2">
<h3 id="_dependency_check">7.4. Dependency-check</h3>
<div class="paragraph">
<p><a href="https://owasp.org/www-project-dependency-check/">Dependency Check</a> de <a href="https://owasp.org/">OWASP</a> (Open Web Application Security Project) es una herramienta que permite identificar las dependencias de nuestro proyecto y comprobar si hay alguna de ellas que tiene vulnerabilidades conocidas. En la práctica anterior configuramos el plugin <code>dependency-check-maven</code> en el bloque <code>&lt;reporting&gt;</code> del <code>pom.xml</code>, por lo que este <a href="https://jeremylong.github.io/DependencyCheck/dependency-check-maven/index.html">plugin se ejecuta</a> cuando llamamos al <em>goal</em> <code>site</code>. Puesto que ya hemos ejecutado <code>site</code> en la fase anterior, no es necesario crear una nueva fase (<em>stage</em>) para generar el informe de Dependency-check, únicamente será necesario publicarlo en el pipeline.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Instala el plugin <a href="https://plugins.jenkins.io/dependency-check-jenkins-plugin/">OWASP Dependency-Check</a> en Jenkins.</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/plugins-owasp-dependency-check-install.png" alt="plugins owasp dependency check install">
</div>
<div class="title">Fig. 36. Instalación del plugin Dependency-Check</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="2">
<li>
<p>Modifica el archivo <code>pom.xml</code> en tu proyecto y añade la siguiente línea para que genere el informe también en formato XML, que es el formato que lee el plugin:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="xml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
</pre></td><td class="code"><pre>			<span class="nt">&lt;plugin&gt;</span>
				<span class="nt">&lt;groupId&gt;</span>org.owasp<span class="nt">&lt;/groupId&gt;</span>
				<span class="nt">&lt;artifactId&gt;</span>dependency-check-maven<span class="nt">&lt;/artifactId&gt;</span>
				<span class="nt">&lt;version&gt;</span>5.3.2<span class="nt">&lt;/version&gt;</span>
				<span class="nt">&lt;configuration&gt;</span>
					<span class="nt">&lt;skipTestScope&gt;</span>false<span class="nt">&lt;/skipTestScope&gt;</span>
<span class="hll">					<span class="nt">&lt;formats&gt;</span> <i class="conum" data-value="1"></i><b>(1)</b>
</span>            <span class="nt">&lt;format&gt;</span>HTML<span class="nt">&lt;/format&gt;</span>
            <span class="nt">&lt;format&gt;</span>XML<span class="nt">&lt;/format&gt;</span>
          <span class="nt">&lt;/formats&gt;</span>
				<span class="nt">&lt;/configuration&gt;</span>
				...
			<span class="nt">&lt;/plugin&gt;</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Genera el informe en HTML y XML</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Añade en el pipeline la siguiente linea para publicar el informe, en el mismo bloque pero antes que <em>checkstyle</em>, <em>pmd</em>, etc.</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy"><span class="n">dependencyCheckPublisher</span> <span class="nl">pattern:</span> <span class="s1">'**/target/site/dependency-check-report.xml'</span></code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="4">
<li>
<p>Tras volver a construir el proyecto, aparecerá una nueva gráfica de <em>Dependency Check</em> en el proyecto. Si no tienes problemas de seguridad en las dependencias, esta gráfica estará en blanco. El enlace al informe de dependencias no aparece en la página principal del proyecto, en el menú de enlaces como el resto, sino que tienes que hacer clic en el número del último build, y en la nueva página ya aparece el enlace:</p>
</li>
</ol>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-dependency-check-link.png" alt="new pipeline dependency check link">
</div>
<div class="title">Fig. 37. Enlace al informe <em>Dependency-Check</em></div>
</div>
<div class="sidebarblock">
<div class="content">
<div class="title">Saber más&#8230;&#8203;</div>
<div class="paragraph">
<p>Si estás interesado en profundizar en este tema, en la asignatura <a href="http://cms.ual.es/UAL/estudios/grados/plandeestudios/asignaturas/asignatura/GRADO4015?idAss=40154308&amp;idTit=4015">Procesos de Ingeniería del Software II</a>, de 4º curso, lo estudiareis en profundidad. En cualquier caso, adelanto que es recomendable integrar <a href="https://www.sonarqube.org/">SonarQube</a> con Jenkins, ya que SonarQube realiza un análisis mucho más detallado de la calidad y seguridad del código, realizando tanto análisis estático de código (CheckStyle y otros), como de análisis de seguridad (vulnerabilidades), y definiendo lo que denomina <a href="https://docs.sonarqube.org/latest/user-guide/quality-gates/"><em>Quality Gates</em></a> que permiten definir condiciones que se deben cumplir basadas en los valores de las métricas del proyecto (por ejemplo, que la cobertura de código sea mayor del 80%). Puedes encontrar mucha documentación online sobre cómo hacerlo:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.sonarqube.org/latest/setup/get-started-2-minutes/">Instalar SonarQube</a> como aplicación o como contenedor Docker (recomendado)</p>
</li>
<li>
<p>Instalar el plugin <a href="https://plugins.jenkins.io/sonar/">SonarQube Scanner for Jenkins</a></p>
</li>
<li>
<p><a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/#header-1">Configurar</a> SonarQube Scanner for Jenkins</p>
</li>
<li>
<p><a href="https://docs.sonarqube.org/latest/analysis/scan/sonarscanner-for-jenkins/#header-6">Añadir al pipeline</a> la fase de análisis de Sonar (<em>Declarative pipeline example:</em>). Más info de Sonar en pipeline: <a href="https://www.jenkins.io/doc/pipeline/steps/sonar/#sonarqube-scanner-for-jenkins">SonarQube Scanner for Jenkins</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Además, si tu proyecto está en un repositorio público en GitHub, puedes ahorrarte tener que instalar tu propio SonarQube utilizando <a href="https://sonarcloud.io/">SonarCloud</a>, el servicio de SonarQube en la nube (SaaS) gratuito para proyectos públicos, con el que evitas tener que instalar y mantener tu propio SonarQube.</p>
</div>
<div class="paragraph">
<p>Para lanzar el análisis de Sonar con maven:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Genera el login <a href="https://docs.sonarqube.org/latest/user-guide/user-token/">TOKEN</a></p>
</li>
<li>
<p>Ejecuta los goals de maven: <code>clean verify sonar:sonar -Dsonar.login=$SONAR_LOGIN_TOKEN</code></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Incluso puedes configurar SonarCloud y Jenkins para que  <a href="https://blog.jdriven.com/2019/08/sonarcloud-github-pull-request-analysis-from-jenkins/">analizar los <em>pull request</em></a> de tu repositorio y conocer el resultado del análisis de Sonar antes de hacer el <em>merge</em> del pull request.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_documentación_javadoc_y_site">7.5. Documentación Javadoc y Site</h3>
<div class="paragraph">
<p>La siguiente fase recomendada en el pipeline, de las <a href="https://stackoverflow.com/a/56149262">lista de fases genéricas</a>, es la de generar la documentación</p>
</div>
<div class="paragraph">
<p>Es necesario instalar previamente el plugin <strong>HTML Publisher</strong> de Jenkins.</p>
</div>
<div class="paragraph">
<p>Añade esta fase al pipeline:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="groovy">    <span class="n">stage</span> <span class="o">(</span><span class="s1">'Documentation'</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">steps</span> <span class="o">{</span>
	    <span class="n">sh</span> <span class="s2">"mvn -f sesion07Maven/pom.xml javadoc:javadoc javadoc:aggregate"</span> <i class="conum" data-value="1"></i><b>(1)</b>
      <span class="o">}</span>
      <span class="n">post</span><span class="o">{</span>
        <span class="n">success</span> <span class="o">{</span>
          <span class="n">step</span> <span class="n">$class</span><span class="o">:</span> <span class="s1">'JavadocArchiver'</span><span class="o">,</span> <span class="nl">javadocDir:</span> <span class="s1">'sesion07Maven/target/site/apidocs'</span><span class="o">,</span> <span class="nl">keepAll:</span> <span class="kc">false</span> <i class="conum" data-value="2"></i><b>(2)</b>
          <span class="n">publishHTML</span><span class="o">(</span><span class="nl">target:</span> <span class="o">[</span><span class="nl">reportName:</span> <span class="s1">'Maven Site'</span><span class="o">,</span> <span class="nl">reportDir:</span> <span class="s1">'sesion07Maven/target/site'</span><span class="o">,</span> <span class="nl">reportFiles:</span> <span class="s1">'index.html'</span><span class="o">,</span> <span class="nl">keepAll:</span> <span class="kc">false</span><span class="o">])</span> <i class="conum" data-value="3"></i><b>(3)</b>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Llamada a javadoc desde Maven.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Publica los archivos html de Javadoc y añade el enlace en el menú.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Publica el <em>site</em> y añade el enlace en el menú.</td>
</tr>
</table>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-docs-links.png" alt="new pipeline docs links">
</div>
<div class="title">Fig. 38. Enlaces a documentación Javadoc y Site</div>
</div>
</div>
<div class="sect2">
<h3 id="_jenkinsfile">7.6. Jenkinsfile</h3>
<div class="paragraph">
<p>La descripción del pipeline puede guardarse en un archivo llamado <code>Jenkinsfile</code> y guardarse en el repositorio como otro archivo de código más. Si haces esto, al configurar el proyecto en Jenkins debes elegir la opción <strong>Pipeline script from SCM</strong> en la sección de definición del pipeline. A continuación, debes proporcionar la URL del repositorio donde se encuentra el archivo Jenkinsfile.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/new-pipeline-jenkinsfile.png" alt="new pipeline jenkinsfile">
</div>
<div class="title">Fig. 39. Configuración del pipeline con archivo <em>Jenkinsfile</em></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq_y_resolución_de_problemas_thoubleshouting">8. FAQ y resolución de problemas (<em>thoubleshouting</em>)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>En esta sección se añadirán soluciones a los problemas más habituales.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>La construcción de maven funciona correctamente en Eclipse pero da error en Jenkins</strong>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Revisa la versión de maven instalada en Jenkins, y actualiza a la última versión: En <em>Jenkins</em> / <em>Manage Jenkins</em> / <em>Global Tool Configuration</em> / <em>Maven Installations</em>. Selecciona la última versión disponible, marca install automatically, y dale un nombre por ejemplo <code>Default Maven</code>. <strong>IMPORTANTE</strong>: si tienes más de una instalación de maven, en los proyectos de tipo maven tendrás que elegir cual deseas usar a partir del nombre que le hayas dado a cada una de ellas, seleccionandola en una lista desplegable en la sección de build.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2021-04-21 13:57:54 +0200
</div>
</div>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .sa, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
</body>
</html>
